<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>회원가입 html</title>

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous">

        <style>
            body {
                min-height: 100vh;
                background-color: #69bb7e;
            }

            .input-form {
                max-width: 780px;
                margin-top: 80px;
                padding: 32px;
                background: #fff;
                -webkit-border-radius: 10px;
                -moz-border-radius: 10px;
                border-radius: 10px;
                -webkit-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
                -moz-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
                box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
            }
        </style>
        <script>
            //오류 확인 체크
            window.addEventListener('load', () => {
                //회원가입 달력 범위 설정
                const birthdate = document.getElementById('user_birth');
                
                if(birthdate) {
                    const now = new Date();
                    const date = `${String(now.getMonth()+1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;
                    birthdate.max = `${now.getFullYear()}-${date}`
                    birthdate.min = `${now.getFullYear() - 100}-${date}`
                }
                //핸드폰 번호 자동 하이픈(-) 설정, 숫자만 써지게 하기
                function autoHypenPhone(str) {
                    str = str.replace(/[^0-9]/g, '');
                    var tmp = '';
                    if (str.length < 4) {
                        return str;
                    } else if (str.length < 7) {
                        tmp += str.substr(0, 3);
                        tmp += '-';
                        tmp += str.substr(3);
                        return tmp;
                    } else if (str.length < 11) {
                        tmp += str.substr(0, 3);
                        tmp += '-';
                        tmp += str.substr(3, 3);
                        tmp += '-';
                        tmp += str.substr(6);
                        return tmp;
                    } else {
                        tmp += str.substr(0, 3);
                        tmp += '-';
                        tmp += str.substr(3, 4);
                        tmp += '-';
                        tmp += str.substr(7);
                        return tmp;
                    }
                    return str;
                }
                var user_tell = document.getElementById('user_tell');
                    user_tell.onkeyup = function (event) {
                        event = event || window.event;
                        var _val = this.value.trim();
                        this.value = autoHypenPhone(_val);
                    }

                //오류 확인
                const forms = document.getElementsByClassName('validation-form');

                Array.prototype.filter.call(forms, (form) => {
                        form.addEventListener('submit', function (event) {
                            let status = true;
                            if (!validatePwdCheck()) {
                                event.preventDefault();
                                event.stopPropagation();
                                status = false;
                            }
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                                status = false;
                            }
                            form.classList.add('was-validated');
                            if (status) {
                                event.preventDefault();
                                event.stopPropagation();
                                alert('회원 가입을 성공했습니다.');
                                return;
                            }
                            alert('회원 가입을 실패했습니다')
                        }, false);
                    });
            }, false);
            //비밀번호 확인
            function validatePwdCheck(el) {
                const _el = el ?? document.getElementById('user_pwcheck');
                if (!_el) {
                    return false;
                }
                if (document.getElementById("user_pw").value !== document.getElementById("user_pwcheck").value) {
                    _el.setCustomValidity('False');
                    return false;
                }
                document
                    .getElementById('user_pwcheck')
                    .setCustomValidity('');
                return true;
            }
        </script>
    </head>
    <body>
        <div class="container">
            <div class="input-form-backgroud row">
                <div class="input-form col-md-12 mx-auto">
                    <h4 class="mb-3">회원가입</h4>
                    <form class="validation-form" novalidate="">
                        <!-- 아이디 -->
                        <div class="row">
                            <div class="col-md-12 mb-2">
                                <label for="user_id">아이디</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="user_id"
                                    placeholder="아이디"
                                    value=""
                                    required="">
                                <div class="invalid-feedback">아이디를 입력해주세요.</div>
                            </div>
                        </div>
                        <!-- 비밀번호 -->
                        <div class="mb-2">
                            <label for="user_pw">비밀번호</label>
                            <input
                                type="text"
                                class="form-control"
                                id="user_pw"
                                placeholder="비밀번호"
                                max=""
                                required="">
                            <div class="invalid-feedback">
                                비밀번호를 확인해주세요
                            </div>
                        </div>
                        <!-- 비밀번호 확인-->
                        <div class="mb-2">
                            <label for="user_pwcheck">비밀번호확인</label>
                            <input
                                type="text"
                                class="form-control"
                                id="user_pwcheck"
                                placeholder="비밀번호확인"
                                oninput="validatePwdCheck(this)"
                                required="">
                            <div class="invalid-feedback">
                                비밀번호를 확인해주세요
                            </div>
                        </div>
                        <!-- 이름 -->
                        <div class="mb-2">
                            <label for="user_name">이름</label>
                            <input type="text" class="form-control" id="user_name" placeholder="이름" required="">
                            <div class="invalid-feedback">
                                이름 입력해주세요
                            </div>
                        </div>
                        <!-- 달력 -->
                        <div class="mb-2">
                            <label for="user_birth">생년월일</label><br>
                            <input
                                type="date"
                                class="form-control"
                                id="user_birth"
                                required="">
                            <div class="invalid-feedback">
                                생년월일을 똑바로 입력해주세요
                            </div>
                        </div>
                        <!-- 핸드폰 번호 줄 맞추기용 -->
                        <div class="mb-2">
                            핸드폰번호
                        </div>
                        <!-- 핸드폰 번호 -->
                        <div class="row">
                            <div class="col-md-2 mb-2">
                                <select class="custom-select d-block w-100" id="carrier" required="">
                                    <option value=""></option>
                                    <option>SKT</option>
                                    <option>KT</option>
                                    <option>LG U+</option>
                                    <option>알뜰폰</option>
                                </select>
                                <div class="invalid-feedback">통신사를 선택해주세요</div>
                            </div>
                            <div class="col-md-7 mb-2">
                                <input
                                    type="text"
                                    class="form-control"
                                    id="user_tell"
                                    placeholder="-를 제외하고 입력해주세요"
                                    maxlength="13"
                                    required="">
                                <div class="invalid-feedback">휴대폰 번호를 입력해주세요</div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <button class="btn btn-primary btn-md btn-block" type="button" value="123123">인증번호 전송</button>
                            </div>
                        </div>
                        <!-- 인증번호 확인 -->
                        <div class="row">
                            <div class="col-md-9 mb-2">
                                <input
                                    type="text"
                                    class="form-control"
                                    id="check"
                                    placeholder="인증번호를 입력해주세요"
                                    maxlength="6"
                                    required="">
                            </div>
                            <div class="col-md-3 mb-2">
                                <button class="btn btn-primary btn-md btn-block" type="button">인증번호 확인</button>
                            </div>

                        </div>
                        <!-- 이메일 -->
                        <div class="mb-2">
                            <label for="user_email">이메일</label>
                            <input
                                type="email"
                                class="form-control"
                                id="user_email"
                                placeholder="you@example.com"
                                required="">
                            <div class="invalid-feedback">이메일을 입력해주세요.</div>
                        </div>
                        <!-- 개인정보 수집 동의 -->
                        <hr class="mb-4">
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="aggrement" required="">
                            <label class="custom-control-label" for="aggrement">개인정보 수집 및 이용에 동의합니다.</label>
                        </div>
                        <!-- 가입완료 -->
                        <div class="mb-4"></div>
                        <button class="btn btn-primary btn-lg btn-block" type="submit">가입완료</button>
                    </form>
                </div>
            </div>
            <footer class="my-3 text-center text-small">
                <p class="mb-1">© 회원가입창</p>
            </footer>
        </div>
    </body>
</html>